# bilibili-captcha
===============================

## Overview

The Python program attempts to recognize [CAPTCHA images](http://www.bilibili.com/captcha) generated by [bilibili.com](http://www.bilibili.com/).

The Python program is developed and tested on Mac OS X 10.10.4 and Windows 10 using python 3.4, there might be
problems if the program is run under other environments. Particularly, the program will not compile using python
2 because of the differences in syntax.

## Dependencies

- [matplotlib](http://matplotlib.org)
- [numpy](http://www.numpy.org)
- [pillow](https://python-pillow.github.io/)
- [requests](http://www.python-requests.org/en/latest)
- [scikit-learn](http://scikit-learn.org/stable)
- [scipy](http://www.scipy.org)
- [theano](http://deeplearning.net/software/theano)

## Usage

Clone all the files and put them under the same directory as your program, including the dataset folder.

## Key Files Overview

captcha_provider.py:

This module is designed to represent the source of the captcha. An abstract base class (HttpCaptchaProvider) is 
defined to represent abstract captcha providers and a derived class (BilibiliCaptchaProvider) is defined to 
represent the specific captcha source we are attempting to recognize. If you want to define other captcha 
sources, you can define another class that inherits from the abstract base class. Two methods thar must be 
overridden are _get_data_from_seq and _is_correct_response which represents getting the data that needs to be 
submitted as part of the request to verify and checking whether the recognized sequence is true respectively.

captcha_recognizer.py:

This module is designed to recognize the images (the return of imread function in matplotlib.image) from a 
particular captcha source (derived class of HttpCaptchaProvider). The steps that an image is recognized are

1. Noise reduction 
  1.1 Noise reduction by hsv
  1.2 Noise reduction by neighbors
After this step the remaining image is a greyscale image with slight nosie.
2. Segmentation
Components are found using the next-nearest-neightbor.
After this step the image is partioned into a number of "characters"."
3. Recognition
If the partitioned characters is as desired, each is recognized using the model in captcha_learn.py.


captcha_learn.py:

This module is designed to use a multilayer perceptron (MLP) model to learn to recognize individual captcha character.
The input layer consists of 300 neurons, which is the result of flattening the standard 20 by 15 captcha character image.
There is only one hidden layer, and it consists of 200 hidden neurons. The output layer consists of 26 neurons, each
corresponding to one possible outcome (EFGH JKLMN PQR TUVWXY  123456 89). The activation function used is tanh. There is
already a model with tuned parameters, an it is saved in best_model.pkl. If you want to reconstruct the model, call
reconstruct_model method. If you want to make prediction, call predict method.

## Example

Let's take a look of a few examples.

## Benchmark

## Related info

[Classifying MNIST digits using Logistic Regression](http://deeplearning.net/tutorial/logreg.html)

[Deep Learning Tutorial](http://deeplearning.net/tutorial/contents.html)

[Image manipulation and processing using Numpy and Scipy](http://scipy-lectures.github.io/advanced/image_processing/)

[Multilayer Perceptron](http://deeplearning.net/tutorial/mlp.html)

[Scikit-image: image processing](http://scipy-lectures.github.io/packages/scikit-image/)

## Authors

The authors of the software are listed in [AUTHORS](AUTHORS).

## License

This software is licensed under the MIT License. See [LICENSE](LICENSE).
